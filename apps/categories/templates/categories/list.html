{# apps/categories/templates/categories/list.html #}
{% extends "base.html" %}

{% block title %}Categories List{% endblock %}

{% block content %}
<div class="max-w-[85%] mx-auto mt-6 bg-white shadow rounded-xl p-4">
<!-- Header -->
<div class="flex justify-between items-center mb-4">
    <h2 class="text-lg font-semibold border-b-2 border-gray-300 pb-1">
        List of Categories
    </h2>
    <a href="{{ url_for('categories.add') }}" class="bg-blue-500 hover:bg-blue-600 text-white text-sm px-3 py-1 rounded">
        Add New Category
    </a>
</div>

<!-- Table -->
<div class="overflow-x-auto">
    <table id="data-tables-id" class="table-auto min-w-full bg-white" style="width:100%;">
        <thead class="bg-white text-gray-600 uppercase text-sm">
            <tr>
                <th class="px-4 py-2 border-b border-gray-200">ID</th>
                <th class="px-4 py-2 border-b border-gray-200">Name</th>
                <th class="px-4 py-2 border-b border-gray-200">Description</th>
                <th class="px-2 py-2 border-b border-gray-200 w-[100px] text-center">Actions</th>
            </tr>
        </thead>
        <tbody class="text-sm text-gray-700">
            {% for item in items %}
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-2 border-b border-gray-200">{{ item.id }}</td>
                    <td class="px-4 py-2 border-b border-gray-200">{{ item.name }}</td>
                    <td class="px-4 py-2 border-b border-gray-200">{{ item.description }}</td>
                    <td class="px-2 py-2 border-b border-gray-200 w-[100px]">
                        <div class="flex gap-1 justify-center whitespace-nowrap">
                            <a href="{{ url_for('categories.view', id=item.id) }}"
                               class="bg-gray-200 hover:bg-gray-300 text-gray-800 text-xs px-2 py-1 rounded">
                                View
                            </a>
                            <a href="{{ url_for('categories.edit', id=item.id) }}"
                               class="bg-yellow-200 hover:bg-yellow-300 text-gray-800 text-xs px-2 py-1 rounded">
                                Edit
                            </a>

                            <!-- Delete via POST -->
                            <form action="{{ url_for('categories.delete', id=item.id) }}" method="post" style="display:inline;">
                                <button type="submit"
                                        onclick="return confirm('Are you sure you want to delete this category?');"
                                        class="bg-red-200 hover:bg-red-300 text-gray-800 text-xs px-2 py-1 rounded">
                                    Del
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="px-4 py-2 text-gray-600">No items found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>
{% endblock %}
